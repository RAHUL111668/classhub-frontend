<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://t.contentsquare.net/uxa/7c5703a6d7ba8.js"></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>6BTCSDS - B.Tech CSE & DS Class Hub</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');

  :root {
    --primary: #6c5ce7;
    --primary-light: #a29bfe;
    --secondary: #fd79a8;
    --accent: #00cec9;
    --accent2: #ffeaa7;
    --dark: #2d3436;
    --darker: #1e272e;
    --light: #dfe6e9;
    --white: #ffffff;
    --gradient1: linear-gradient(135deg, #6c5ce7, #a29bfe, #fd79a8);
    --gradient2: linear-gradient(135deg, #00cec9, #6c5ce7);
    --gradient3: linear-gradient(135deg, #fd79a8, #ffeaa7);
    --shadow: 0 10px 40px rgba(108, 92, 231, 0.15);
    --shadow-hover: 0 20px 60px rgba(108, 92, 231, 0.25);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Poppins', sans-serif;
    background: #0f0f1a;
    color: #e0e0e0;
    overflow-x: hidden;
    min-height: 100vh;
  }

  /* ===== ANIMATED BACKGROUND ===== */
  .bg-animation {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    overflow: hidden;
    pointer-events: none;
  }
  .bg-animation .bubble {
    position: absolute;
    border-radius: 50%;
    opacity: 0.07;
    animation: floatBubble 20s infinite ease-in-out;
  }
  @keyframes floatBubble {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-80px) rotate(120deg); }
    66% { transform: translateY(40px) rotate(240deg); }
  }

  /* ===== NAVIGATION ===== */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 1000;
    background: rgba(15, 15, 26, 0.85);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(108, 92, 231, 0.2);
    padding: 0 20px;
    transition: all 0.3s;
  }
  nav.scrolled { background: rgba(15, 15, 26, 0.95); }
  .nav-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 70px;
  }
  .logo {
    font-size: 1.6rem;
    font-weight: 800;
    background: var(--gradient1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    cursor: pointer;
    letter-spacing: -0.5px;
  }
  .nav-links {
    display: flex;
    gap: 5px;
    list-style: none;
    flex-wrap: wrap;
    justify-content: center;
  }
  .nav-links li a {
    color: #b0b0b0;
    text-decoration: none;
    padding: 8px 16px;
    border-radius: 25px;
    font-size: 0.85rem;
    font-weight: 500;
    transition: all 0.3s;
    display: block;
    white-space: nowrap;
  }
  .nav-links li a:hover, .nav-links li a.active {
    color: var(--white);
    background: rgba(108, 92, 231, 0.2);
  }
  .nav-links li a.active {
    background: var(--primary);
  }
  .hamburger {
    display: none;
    flex-direction: column;
    gap: 5px;
    cursor: pointer;
    padding: 5px;
  }
  .hamburger span {
    width: 25px; height: 2px;
    background: var(--white);
    transition: all 0.3s;
    border-radius: 2px;
  }

  /* ===== MAIN CONTENT ===== */
  main {
    position: relative;
    z-index: 1;
    padding-top: 70px;
  }
  .page { display: none; animation: fadeIn 0.5s ease; }
  .page.active { display: block; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

  .section-header {
    text-align: center;
    padding: 60px 20px 40px;
  }
  .section-header h1 {
    font-size: 2.5rem;
    font-weight: 800;
    background: var(--gradient1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 10px;
  }
  .section-header p {
    color: #888;
    font-size: 1rem;
    max-width: 500px;
    margin: 0 auto;
  }

  .container { max-width: 1200px; margin: 0 auto; padding: 0 20px 60px; }

  /* ===== HOME PAGE ===== */
  .hero {
    min-height: 85vh;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 40px 20px;
    position: relative;
  }
  .hero-content h1 {
    font-size: clamp(2.5rem, 6vw, 4.5rem);
    font-weight: 900;
    line-height: 1.1;
    margin-bottom: 20px;
    background: var(--gradient1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .hero-content .subtitle {
    font-size: clamp(1rem, 2.5vw, 1.3rem);
    color: #888;
    margin-bottom: 40px;
    max-width: 600px;
    margin-left: auto; margin-right: auto;
  }

  /* ===== CLASS BANNER ===== */
  .class-banner {
    position: relative;
    height: 500px;
    background: linear-gradient(135deg, rgba(108, 92, 231, 0.3), rgba(253, 121, 168, 0.3)),
                url('https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=1920') center/cover;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    overflow: hidden;
  }
  .class-banner::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(180deg, rgba(15, 15, 26, 0.3) 0%, rgba(15, 15, 26, 0.8) 100%);
  }
  .class-banner-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(135deg, rgba(108, 92, 231, 0.4), rgba(0, 206, 201, 0.3));
  }
  .class-banner-content {
    position: relative;
    z-index: 2;
    padding: 40px;
  }
  .class-batch {
    display: inline-block;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    padding: 8px 20px;
    border-radius: 25px;
    font-size: 0.9rem;
    color: #fff;
    margin-bottom: 20px;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }
  .class-banner-content h1 {
    font-size: clamp(4rem, 12vw, 8rem);
    font-weight: 900;
    color: #fff;
    text-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    letter-spacing: 10px;
    margin-bottom: 15px;
    background: linear-gradient(135deg, #fff, #a29bfe);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .class-tagline {
    font-size: clamp(1.2rem, 3vw, 1.8rem);
    color: #a29bfe;
    font-weight: 600;
    margin-bottom: 10px;
  }
  .class-subtitle {
    font-size: clamp(0.9rem, 2vw, 1.1rem);
    color: rgba(255, 255, 255, 0.7);
    font-style: italic;
  }

  /* ===== CLASS INTRO ===== */
  .class-intro {
    background: linear-gradient(180deg, rgba(108, 92, 231, 0.1), transparent);
    padding: 60px 0 40px;
  }
  .intro-text {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 40px;
  }
  .intro-text h2 {
    font-size: 2.2rem;
    background: var(--gradient1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 20px;
  }
  .intro-text p {
    font-size: 1.1rem;
    color: #aaa;
    line-height: 1.8;
  }
  .hero-stats {
    display: flex;
    gap: 40px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 40px;
  }
  .hero-stat {
    text-align: center;
  }
  .hero-stat .num {
    font-size: 2.5rem;
    font-weight: 800;
    background: var(--gradient2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .hero-stat .label {
    font-size: 0.85rem;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .hero-buttons { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }

  .btn {
    padding: 12px 30px;
    border: none;
    border-radius: 50px;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
  }
  .btn-primary {
    background: var(--gradient1);
    color: var(--white);
    box-shadow: 0 5px 25px rgba(108, 92, 231, 0.3);
  }
  .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 10px 35px rgba(108, 92, 231, 0.4); }
  .btn-secondary {
    background: rgba(255,255,255,0.05);
    color: var(--white);
    border: 1px solid rgba(255,255,255,0.1);
  }
  .btn-secondary:hover { background: rgba(255,255,255,0.1); transform: translateY(-3px); }
  .btn-sm { padding: 8px 20px; font-size: 0.8rem; }
  .btn-danger { background: linear-gradient(135deg, #e74c3c, #c0392b); color: #fff; }

  /* ===== STUDENTS GRID ===== */
  .students-section { padding: 40px 0; }
  .add-bar {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
    flex-wrap: wrap;
  }
  .add-bar input, .add-bar select {
    padding: 12px 20px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 15px;
    background: rgba(255,255,255,0.05);
    color: #fff;
    font-family: 'Poppins', sans-serif;
    font-size: 0.9rem;
    flex: 1;
    min-width: 150px;
  }
  .add-bar input:focus, .add-bar select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.15);
  }
  .add-bar input::placeholder { color: #666; }

  .students-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 25px;
  }
  .student-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 20px;
    padding: 25px 20px;
    text-align: center;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }
  .student-card:hover {
    transform: translateY(-8px);
    border-color: var(--primary);
    box-shadow: var(--shadow);
    background: rgba(108, 92, 231, 0.05);
  }
  .student-avatar {
    width: 90px; height: 90px;
    border-radius: 50%;
    margin: 0 auto 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: 700;
    color: #fff;
    overflow: hidden;
    border: 3px solid rgba(108, 92, 231, 0.3);
    transition: all 0.3s;
  }
  .student-card:hover .student-avatar {
    border-color: var(--primary);
    transform: scale(1.05);
  }
  .student-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .student-card h3 { font-size: 1.1rem; font-weight: 600; margin-bottom: 6px; color: #e0e0e0; }
  .student-card .role {
    font-size: 0.7rem;
    color: var(--primary-light);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    font-weight: 600;
    margin-bottom: 10px;
    padding: 4px 12px;
    background: rgba(108, 92, 231, 0.15);
    border-radius: 20px;
    display: inline-block;
  }
  .student-card .desc {
    font-size: 0.85rem;
    color: #888;
    line-height: 1.5;
    margin-top: 10px;
    font-style: italic;
  }
  .student-card .remove-btn {
    position: absolute;
    top: 8px; right: 8px;
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
    border: none;
    border-radius: 50%;
    width: 26px; height: 26px;
    cursor: pointer;
    font-size: 0.8rem;
    opacity: 0;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .student-card:hover .remove-btn { opacity: 1; }

  /* ===== COURSES ===== */
  .courses-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  .course-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 20px;
    padding: 30px;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }
  .course-card:hover {
    transform: translateY(-5px);
    border-color: var(--accent);
    box-shadow: 0 10px 40px rgba(0, 206, 201, 0.15);
  }
  .course-card .emoji { font-size: 2.5rem; margin-bottom: 15px; display: block; }
  .course-card h3 { font-size: 1.1rem; margin-bottom: 8px; color: #e0e0e0; }
  .course-card p { font-size: 0.85rem; color: #888; line-height: 1.5; }

  /* ===== POLLS PAGE ===== */
  .polls-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 25px;
  }
  .poll-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 24px;
    padding: 30px;
    transition: all 0.3s;
  }
  .poll-card:hover {
    border-color: rgba(108, 92, 231, 0.3);
    box-shadow: var(--shadow);
  }
  .poll-card .poll-emoji { font-size: 2rem; margin-bottom: 10px; display: block; }
  .poll-card h3 { font-size: 1.15rem; font-weight: 700; margin-bottom: 5px; color: #e0e0e0; }
  .poll-card .poll-desc { font-size: 0.8rem; color: #888; margin-bottom: 20px; }
  .poll-options { display: flex; flex-direction: column; gap: 10px; }
  .poll-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 18px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }
  .poll-option:hover { border-color: var(--primary); background: rgba(108, 92, 231, 0.08); }
  .poll-option.voted {
    border-color: var(--primary);
    background: rgba(108, 92, 231, 0.1);
  }
  .poll-option .fill-bar {
    position: absolute;
    left: 0; top: 0; bottom: 0;
    background: rgba(108, 92, 231, 0.1);
    border-radius: 14px;
    transition: width 0.6s ease;
    z-index: 0;
  }
  .poll-option span { position: relative; z-index: 1; }
  .poll-option .name { flex: 1; font-size: 0.9rem; font-weight: 500; }
  .poll-option .votes { font-size: 0.8rem; color: var(--primary-light); font-weight: 600; }
  .poll-total { text-align: right; margin-top: 10px; font-size: 0.75rem; color: #666; }

  /* ===== MEME PAGE ===== */
  .meme-upload-area {
    background: rgba(255,255,255,0.03);
    border: 2px dashed rgba(255,255,255,0.1);
    border-radius: 24px;
    padding: 50px 30px;
    text-align: center;
    margin-bottom: 40px;
    transition: all 0.3s;
    cursor: pointer;
  }
  .meme-upload-area:hover, .meme-upload-area.dragover {
    border-color: var(--primary);
    background: rgba(108, 92, 231, 0.05);
  }
  .meme-upload-area .upload-icon { font-size: 3rem; margin-bottom: 15px; display: block; }
  .meme-upload-area h3 { margin-bottom: 8px; color: #e0e0e0; }
  .meme-upload-area p { font-size: 0.85rem; color: #888; }
  .meme-caption-input {
    width: 100%;
    max-width: 500px;
    padding: 12px 20px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 15px;
    background: rgba(255,255,255,0.05);
    color: #fff;
    font-family: 'Poppins', sans-serif;
    font-size: 0.9rem;
    margin-top: 15px;
  }
  .meme-caption-input:focus { outline: none; border-color: var(--primary); }

  .memes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 25px;
  }
  .meme-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 20px;
    overflow: hidden;
    transition: all 0.3s;
  }
  .meme-card:hover { transform: translateY(-5px); box-shadow: var(--shadow); }
  .meme-card img {
    width: 100%;
    height: 280px;
    object-fit: cover;
    display: block;
  }
  .meme-info {
    padding: 18px;
  }
  .meme-info .caption { font-size: 0.95rem; font-weight: 500; margin-bottom: 5px; }
  .meme-info .author { font-size: 0.78rem; color: #888; margin-bottom: 12px; }
  .meme-reactions {
    display: flex;
    gap: 8px;
  }
  .meme-react-btn {
    padding: 6px 14px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.85rem;
    color: #ccc;
    transition: all 0.2s;
    font-family: 'Poppins', sans-serif;
  }
  .meme-react-btn:hover { background: rgba(108, 92, 231, 0.15); border-color: var(--primary); }
  .meme-react-btn.active { background: rgba(108, 92, 231, 0.2); border-color: var(--primary); color: var(--primary-light); }
  .meme-card .delete-meme {
    position: absolute;
    top: 10px; right: 10px;
    background: rgba(0,0,0,0.6);
    color: #e74c3c;
    border: none;
    border-radius: 50%;
    width: 30px; height: 30px;
    cursor: pointer;
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s;
  }
  .meme-card:hover .delete-meme { opacity: 1; }
  .meme-card { position: relative; }

  /* ===== CONFESSIONS ===== */
  .confession-form {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 24px;
    padding: 30px;
    margin-bottom: 40px;
  }
  .confession-form textarea {
    width: 100%;
    min-height: 100px;
    padding: 15px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 15px;
    background: rgba(255,255,255,0.05);
    color: #fff;
    font-family: 'Poppins', sans-serif;
    font-size: 0.9rem;
    resize: vertical;
    margin-bottom: 15px;
  }
  .confession-form textarea:focus { outline: none; border-color: var(--primary); }
  .confession-form .form-footer { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
  .confession-form .anon-note { font-size: 0.78rem; color: #888; }

  .confessions-list { display: flex; flex-direction: column; gap: 20px; }
  .confession-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 20px;
    padding: 25px;
    transition: all 0.3s;
    position: relative;
  }
  .confession-card:hover { border-color: rgba(253, 121, 168, 0.3); }
  .confession-card .confession-text {
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 15px;
    color: #d0d0d0;
    font-style: italic;
  }
  .confession-card .confession-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px;
  }
  .confession-card .time { font-size: 0.75rem; color: #666; }
  .confession-reacts {
    display: flex;
    gap: 6px;
  }
  .confession-react-btn {
    padding: 4px 12px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.8rem;
    transition: all 0.2s;
    color: #ccc;
    font-family: 'Poppins', sans-serif;
  }
  .confession-react-btn:hover { background: rgba(253, 121, 168, 0.15); border-color: var(--secondary); }

  /* ===== SPINNER PAGE ===== */
  .spinner-page { text-align: center; padding-bottom: 60px; }
  .spinner-container {
    display: flex;
    flex-wrap: wrap;
    gap: 40px;
    justify-content: center;
    align-items: flex-start;
    margin-top: 20px;
  }
  .spinner-box {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 24px;
    padding: 40px 30px;
    flex: 1;
    min-width: 300px;
    max-width: 500px;
  }
  .spinner-box h2 { font-size: 1.3rem; margin-bottom: 20px; color: #e0e0e0; }
  .wheel-wrapper {
    position: relative;
    width: 260px; height: 260px;
    margin: 0 auto 25px;
  }
  .wheel {
    width: 100%; height: 100%;
    border-radius: 50%;
    border: 4px solid var(--primary);
    transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
    position: relative;
    overflow: hidden;
  }
  .wheel-pointer {
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-top: 20px solid var(--secondary);
    z-index: 5;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
  }
  .spin-result {
    min-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--accent);
    padding: 15px;
    background: rgba(0, 206, 201, 0.05);
    border-radius: 15px;
    margin-top: 15px;
  }

  /* Excuse Generator */
  .excuse-box {
    background: rgba(255, 234, 167, 0.05);
    border: 1px solid rgba(255, 234, 167, 0.15);
    border-radius: 24px;
    padding: 40px;
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }
  .excuse-display {
    font-size: 1.2rem;
    font-weight: 500;
    color: var(--accent2);
    min-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    margin: 25px 0;
    line-height: 1.6;
  }

  /* ===== MODAL ===== */
  .modal-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(5px);
    z-index: 2000;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .modal-overlay.show { display: flex; }
  .modal {
    background: #1a1a2e;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 24px;
    padding: 40px;
    max-width: 500px;
    width: 100%;
    animation: modalIn 0.3s ease;
  }
  @keyframes modalIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  .modal h2 { margin-bottom: 20px; background: var(--gradient1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .modal label { display: block; margin-bottom: 5px; font-size: 0.85rem; color: #aaa; margin-top: 12px; }
  .modal input, .modal select {
    width: 100%;
    padding: 10px 16px;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    background: rgba(255,255,255,0.05);
    color: #fff;
    font-family: 'Poppins', sans-serif;
    font-size: 0.9rem;
  }
  .modal input:focus, .modal select:focus { outline: none; border-color: var(--primary); }
  .modal-buttons { display: flex; gap: 10px; margin-top: 25px; justify-content: flex-end; }

  /* ===== TOAST ===== */
  .toast-container {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 3000;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .toast {
    padding: 14px 24px;
    border-radius: 14px;
    font-size: 0.85rem;
    font-weight: 500;
    animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s;
    color: #fff;
    max-width: 350px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }
  .toast.success { background: linear-gradient(135deg, #00b894, #00cec9); }
  .toast.error { background: linear-gradient(135deg, #e74c3c, #fd79a8); }
  .toast.info { background: linear-gradient(135deg, #6c5ce7, #a29bfe); }
  @keyframes toastIn { from { transform: translateX(100px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
  @keyframes toastOut { from { opacity: 1; } to { opacity: 0; } }

  /* ===== RESPONSIVE ===== */
  @media (max-width: 768px) {
    .hamburger { display: flex; }
    .nav-links {
      position: fixed;
      top: 70px; left: 0; right: 0;
      background: rgba(15, 15, 26, 0.98);
      flex-direction: column;
      padding: 20px;
      gap: 5px;
      transform: translateY(-120%);
      transition: transform 0.3s;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    .nav-links.open { transform: translateY(0); }
    .nav-links li a { padding: 12px 20px; }
    .section-header h1 { font-size: 1.8rem; }
    .polls-grid { grid-template-columns: 1fr; }
    .students-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
  }

  /* ===== SCROLL ===== */
  ::-webkit-scrollbar { width: 8px; }
  ::-webkit-scrollbar-track { background: #0f0f1a; }
  ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
  ::-webkit-scrollbar-thumb:hover { background: #555; }

  /* ===== Floating particles ===== */
  .particle {
    position: fixed;
    pointer-events: none;
    border-radius: 50%;
    z-index: 0;
    opacity: 0;
    animation: particleFade 1.5s ease forwards;
  }
  @keyframes particleFade {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-120px) scale(0); }
  }

  /* Confetti */
  .confetti-piece {
    position: fixed;
    z-index: 9999;
    pointer-events: none;
    animation: confettiFall 3s ease forwards;
  }
  @keyframes confettiFall {
    0% { opacity: 1; transform: translateY(0) rotate(0deg); }
    100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
  }

  /* Leaderboard styles */
  .leaderboard {
    margin-top: 40px;
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 24px;
    padding: 30px;
  }
  .leaderboard h2 {
    font-size: 1.3rem;
    margin-bottom: 20px;
    text-align: center;
    background: var(--gradient3);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .leaderboard-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 12px 15px;
    border-radius: 14px;
    margin-bottom: 8px;
    transition: background 0.2s;
  }
  .leaderboard-item:hover { background: rgba(255,255,255,0.03); }
  .leaderboard-item .rank {
    width: 35px; height: 35px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.85rem;
    flex-shrink: 0;
  }
  .leaderboard-item:nth-child(1) .rank { background: linear-gradient(135deg, #f9ca24, #f0932b); color: #000; }
  .leaderboard-item:nth-child(2) .rank { background: linear-gradient(135deg, #b2bec3, #636e72); color: #fff; }
  .leaderboard-item:nth-child(3) .rank { background: linear-gradient(135deg, #e17055, #d63031); color: #fff; }
  .leaderboard-item .l-name { flex: 1; font-weight: 500; }
  .leaderboard-item .l-votes { font-weight: 700; color: var(--primary-light); }

  .empty-state {
    text-align: center;
    padding: 60px 20px;
    color: #555;
  }
  .empty-state .empty-icon { font-size: 3rem; margin-bottom: 15px; display: block; }
</style>
</head>
<body>

<!-- Animated Background Bubbles -->
<div class="bg-animation" id="bgAnimation"></div>

<!-- Navigation -->
<nav id="navbar">
  <div class="nav-inner">
    <div class="logo" onclick="navigateTo('home')">6BTCSDS</div>
    <ul class="nav-links" id="navLinks">
      <li><a href="#" data-page="home" class="active" onclick="navigateTo('home')">Home</a></li>
      <li><a href="#" data-page="polls" onclick="navigateTo('polls')">Polls</a></li>
      <li><a href="#" data-page="memes" onclick="navigateTo('memes')">Memes</a></li>
      <li><a href="#" data-page="confessions" onclick="navigateTo('confessions')">Confessions</a></li>
      <li><a href="#" data-page="spinner" onclick="navigateTo('spinner')">Spinner</a></li>
      <li><a href="#" data-page="excuses" onclick="navigateTo('excuses')">Excuses</a></li>
    </ul>
    <div class="hamburger" onclick="toggleMenu()">
      <span></span><span></span><span></span>
    </div>
  </div>
</nav>

<!-- Toast Container -->
<div class="toast-container" id="toastContainer"></div>

<main>

  <!-- ==================== HOME PAGE ==================== -->
  <div class="page active" id="page-home">
    <!-- Class Photo Banner -->
    <div class="class-banner">
      <div class="class-banner-overlay"></div>
      <div class="class-banner-content">
        <span class="class-batch">Batch 2024-2025</span>
        <h1>6BTCSDS</h1>
        <p class="class-tagline">B.Tech Computer Science & Data Science</p>
        <p class="class-subtitle">Where Code Meets Creativity</p>
      </div>
    </div>

    <!-- Class Intro Section -->
    <div class="class-intro">
      <div class="container">
        <div class="intro-text">
          <h2>Welcome to 6BTCSDS</h2>
          <p>We're not just a class, we're a family of coders, dreamers, and future tech leaders. From late-night debugging sessions to unforgettable campus memories, 6BTCSDS is where friendships are forged and futures are built.</p>
        </div>
        <div class="hero-stats">
          <div class="hero-stat">
            <div class="num" id="statStudents">0</div>
            <div class="label">Students</div>
          </div>
          <div class="hero-stat">
            <div class="num" id="statMemes">0</div>
            <div class="label">Memes</div>
          </div>
          <div class="hero-stat">
            <div class="num" id="statVotes">0</div>
            <div class="label">Votes Cast</div>
          </div>
          <div class="hero-stat">
            <div class="num" id="statConfessions">0</div>
            <div class="label">Confessions</div>
          </div>
        </div>
        <div class="hero-buttons">
          <button class="btn btn-primary" onclick="navigateTo('polls')">Start Voting</button>
          <button class="btn btn-secondary" onclick="navigateTo('memes')">Meme Zone</button>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- Students Section -->
      <div class="students-section">
        <div class="section-header" style="padding-left:0; text-align:left;">
          <h1 style="font-size:1.8rem;">Our Squad</h1>
          <p style="margin:0;">Meet the brilliant minds of 6BTCSDS</p>
        </div>
        <div class="add-bar">
          <input type="text" id="studentName" placeholder="Student name..." maxlength="30">
          <input type="text" id="studentDesc" placeholder="Short description..." maxlength="100">
          <input type="file" id="studentPhoto" accept="image/*" style="display:none" onchange="previewStudentPhoto(event)">
          <button class="btn btn-secondary btn-sm" onclick="document.getElementById('studentPhoto').click()">ðŸ“· Photo</button>
          <select id="studentRole">
            <option value="Student">Student</option>
            <option value="CR">CR (Class Rep)</option>
            <option value="Topper">Topper</option>
            <option value="Backbencher">Backbencher</option>
            <option value="Sleeper">Sleeper</option>
            <option value="Comedian">Comedian</option>
            <option value="All-rounder">All-rounder</option>
          </select>
          <button class="btn btn-primary btn-sm" onclick="addStudent()">+ Add</button>
        </div>
        <div id="photoPreview" style="display:none; margin-bottom:15px;">
          <img id="previewImg" style="width:80px; height:80px; border-radius:50%; object-fit:cover; border:3px solid var(--primary);">
        </div>
        <div class="students-grid" id="studentsGrid"></div>
      </div>

      <!-- Courses Section -->
      <div style="margin-top: 50px;">
        <div class="section-header" style="padding-left:0; text-align:left;">
          <h1 style="font-size:1.8rem;">Our Courses</h1>
          <p style="margin:0;">What we're surviving through</p>
        </div>
        <div class="add-bar">
          <input type="text" id="courseName" placeholder="Course name..." maxlength="50">
          <input type="text" id="courseProf" placeholder="Professor..." maxlength="30">
          <button class="btn btn-primary btn-sm" onclick="addCourse()">+ Add Course</button>
        </div>
        <div class="courses-grid" id="coursesGrid"></div>
      </div>
    </div>
  </div>

  <!-- ==================== POLLS PAGE ==================== -->
  <div class="page" id="page-polls">
    <div class="section-header">
      <h1>Polls & Voting</h1>
      <p>Vote for your classmates in these fun categories!</p>
    </div>
    <div class="container">
      <div class="polls-grid" id="pollsGrid"></div>
      <div class="leaderboard" id="leaderboard" style="display:none;">
        <h2>Hall of Fame</h2>
        <div id="leaderboardList"></div>
      </div>
    </div>
  </div>

  <!-- ==================== MEMES PAGE ==================== -->
  <div class="page" id="page-memes">
    <div class="section-header">
      <h1>Meme Zone</h1>
      <p>Upload the funniest class memes and react!</p>
    </div>
    <div class="container">
      <div class="meme-upload-area" id="memeUploadArea" onclick="document.getElementById('memeFileInput').click()">
        <span class="upload-icon">&#128248;</span>
        <h3>Drop your meme here</h3>
        <p>or click to browse (JPG, PNG, GIF)</p>
        <input type="text" class="meme-caption-input" id="memeCaption" placeholder="Add a caption..." onclick="event.stopPropagation()">
        <input type="text" class="meme-caption-input" id="memeAuthor" placeholder="Your name (optional)" onclick="event.stopPropagation()" style="margin-top:8px;">
        <input type="file" id="memeFileInput" accept="image/*" style="display:none;" onchange="handleMemeUpload(event)">
      </div>
      <div class="memes-grid" id="memesGrid"></div>
    </div>
  </div>

  <!-- ==================== CONFESSIONS PAGE ==================== -->
  <div class="page" id="page-confessions">
    <div class="section-header">
      <h1>Confession Wall</h1>
      <p>Spill the tea anonymously. No judgment, just vibes.</p>
    </div>
    <div class="container">
      <div class="confession-form">
        <textarea id="confessionText" placeholder="Write your confession here... It's completely anonymous!"></textarea>
        <div class="form-footer">
          <span class="anon-note">100% Anonymous - No one will know</span>
          <button class="btn btn-primary btn-sm" onclick="addConfession()">Post Confession</button>
        </div>
      </div>
      <div class="confessions-list" id="confessionsList"></div>
    </div>
  </div>

  <!-- ==================== SPINNER PAGE ==================== -->
  <div class="page" id="page-spinner">
    <div class="section-header">
      <h1>Truth or Dare Spinner</h1>
      <p>Spin the wheel and face your fate!</p>
    </div>
    <div class="container spinner-page">
      <div class="spinner-container">
        <!-- Student Picker -->
        <div class="spinner-box">
          <h2>&#127919; Pick a Victim</h2>
          <div class="wheel-wrapper">
            <div class="wheel-pointer"></div>
            <canvas id="studentWheel" width="260" height="260"></canvas>
          </div>
          <button class="btn btn-primary" onclick="spinStudentWheel()">Spin!</button>
          <div class="spin-result" id="studentSpinResult">Spin to pick someone...</div>
        </div>
        <!-- Truth or Dare -->
        <div class="spinner-box">
          <h2>&#127183; Truth or Dare</h2>
          <div style="display:flex; gap:15px; justify-content:center; margin-bottom:20px;">
            <button class="btn btn-primary" onclick="generateTruth()">Truth</button>
            <button class="btn btn-danger" onclick="generateDare()">Dare</button>
          </div>
          <div class="spin-result" id="todResult">Press Truth or Dare!</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== EXCUSES PAGE ==================== -->
  <div class="page" id="page-excuses">
    <div class="section-header">
      <h1>Excuse Generator</h1>
      <p>Need an excuse for bunking? We got you covered!</p>
    </div>
    <div class="container">
      <div class="excuse-box">
        <span style="font-size:4rem;">&#128517;</span>
        <div class="excuse-display" id="excuseDisplay">Press the button to generate an excuse!</div>
        <button class="btn btn-primary" onclick="generateExcuse()">Generate Excuse</button>
        <button class="btn btn-secondary" onclick="copyExcuse()" style="margin-left:10px;">Copy</button>
      </div>
    </div>
  </div>

</main>

<script>
// ==================== DATA STORE ====================
const DB = {
  get(key, def=[]) { try { return JSON.parse(localStorage.getItem('cv_'+key)) || def; } catch { return def; } },
  set(key, val) { localStorage.setItem('cv_'+key, JSON.stringify(val)); }
};

// ==================== INTERACTION TRACKER ====================
const InteractionTracker = {
  sessionId: null,
  startTime: null,
  currentPage: 'home',
  pageStartTime: null,

  init() {
    this.sessionId = 'sess_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    this.startTime = Date.now();
    this.pageStartTime = Date.now();
    this.currentPage = 'home';

    // Track all clicks
    document.addEventListener('click', (e) => this.trackClick(e));

    // Track page visibility changes
    document.addEventListener('visibilitychange', () => this.trackVisibility());

    // Track before unload
    window.addEventListener('beforeunload', () => this.trackSessionEnd());

    // Log initial page view
    this.logInteraction('page_view', { page: 'home', url: window.location.href });
  },

  trackClick(e) {
    const target = e.target;
    const interaction = {
      tag: target.tagName,
      id: target.id || null,
      class: target.className || null,
      text: target.textContent ? target.textContent.trim().substring(0, 50) : null,
      page: this.currentPage,
      timestamp: Date.now()
    };

    // Track specific actions based on element
    if (target.tagName === 'BUTTON' || target.closest('button')) {
      const btn = target.tagName === 'BUTTON' ? target : target.closest('button');
      this.logInteraction('button_click', {
        ...interaction,
        buttonText: btn.textContent.trim().substring(0, 30),
        onclick: btn.getAttribute('onclick') || null
      });
    } else if (target.tagName === 'A' || target.closest('a')) {
      const link = target.tagName === 'A' ? target : target.closest('a');
      this.logInteraction('nav_click', {
        ...interaction,
        href: link.getAttribute('href') || null,
        dataPage: link.dataset.page || null
      });
    } else if (target.classList.contains('poll-option')) {
      this.logInteraction('vote_click', interaction);
    } else if (target.classList.contains('meme-react-btn')) {
      this.logInteraction('meme_reaction', interaction);
    } else if (target.classList.contains('confession-react-btn')) {
      this.logInteraction('confession_reaction', interaction);
    }
  },

  trackPageChange(newPage) {
    // Log time spent on previous page
    const timeSpent = Date.now() - this.pageStartTime;
    this.logInteraction('page_exit', {
      page: this.currentPage,
      timeSpentMs: timeSpent,
      timeSpentSec: Math.round(timeSpent / 1000)
    });

    // Update current page
    this.currentPage = newPage;
    this.pageStartTime = Date.now();

    this.logInteraction('page_view', {
      page: newPage,
      url: window.location.href,
      referrer: this.currentPage
    });
  },

  trackVisibility() {
    this.logInteraction('visibility_change', {
      hidden: document.hidden,
      page: this.currentPage,
      timeOnPage: Date.now() - this.pageStartTime
    });
  },

  trackSessionEnd() {
    const totalTime = Date.now() - this.startTime;
    const timeOnCurrentPage = Date.now() - this.pageStartTime;

    this.logInteraction('session_end', {
      totalTimeMs: totalTime,
      totalTimeMin: Math.round(totalTime / 60000 * 100) / 100,
      finalPage: this.currentPage,
      timeOnFinalPageMs: timeOnCurrentPage
    });
  },

  logInteraction(type, data) {
    const interactions = DB.get('interactions', []);
    interactions.push({
      sessionId: this.sessionId,
      type: type,
      data: data,
      timestamp: Date.now(),
      date: new Date().toISOString()
    });

    // Keep only last 5000 interactions to prevent storage overflow
    if (interactions.length > 5000) {
      interactions.shift();
    }

    DB.set('interactions', interactions);
  },

  // Get all interactions for analysis
  getAllInteractions() {
    return DB.get('interactions', []);
  },

  // Get interactions for current session
  getCurrentSession() {
    return this.getAllInteractions().filter(i => i.sessionId === this.sessionId);
  },

  // Get summary statistics
  getSummary() {
    const interactions = this.getAllInteractions();
    const summary = {
      totalInteractions: interactions.length,
      sessions: [...new Set(interactions.map(i => i.sessionId))],
      pageViews: {},
      buttonClicks: {},
      votes: 0,
      reactions: 0,
      timeByPage: {}
    };

    interactions.forEach(i => {
      if (i.type === 'page_view') {
        const page = i.data.page;
        summary.pageViews[page] = (summary.pageViews[page] || 0) + 1;
      }
      if (i.type === 'button_click') {
        const btn = i.data.buttonText || 'unknown';
        summary.buttonClicks[btn] = (summary.buttonClicks[btn] || 0) + 1;
      }
      if (i.type === 'vote_click') summary.votes++;
      if (i.type === 'meme_reaction' || i.type === 'confession_reaction') summary.reactions++;
      if (i.type === 'page_exit' && i.data.timeSpentSec) {
        const page = i.data.page;
        if (!summary.timeByPage[page]) summary.timeByPage[page] = [];
        summary.timeByPage[page].push(i.data.timeSpentSec);
      }
    });

    // Calculate average time per page
    Object.keys(summary.timeByPage).forEach(page => {
      const times = summary.timeByPage[page];
      const avg = times.reduce((a, b) => a + b, 0) / times.length;
      summary.timeByPage[page] = {
        visits: times.length,
        avgTimeSec: Math.round(avg),
        totalTimeSec: times.reduce((a, b) => a + b, 0)
      };
    });

    return summary;
  },

  // Clear all interactions
  clear() {
    DB.set('interactions', []);
  },

  // Export as JSON for analysis
  export() {
    return JSON.stringify({
      exportDate: new Date().toISOString(),
      currentUrl: window.location.href,
      summary: this.getSummary(),
      interactions: this.getAllInteractions()
    }, null, 2);
  }
};

// ==================== NAVIGATION ====================
function navigateTo(page) {
  // Track page change before switching
  if (typeof InteractionTracker !== 'undefined') {
    InteractionTracker.trackPageChange(page);
  }

  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-'+page).classList.add('active');
  document.querySelectorAll('.nav-links a').forEach(a => {
    a.classList.toggle('active', a.dataset.page === page);
  });
  document.getElementById('navLinks').classList.remove('open');
  window.scrollTo({top: 0, behavior: 'smooth'});
  if(page === 'polls') renderPolls();
  if(page === 'spinner') drawStudentWheel();
  if(page === 'home') updateStats();
}

function toggleMenu() {
  document.getElementById('navLinks').classList.toggle('open');
}

// Navbar scroll effect
window.addEventListener('scroll', () => {
  document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 50);
});

// ==================== TOAST ====================
function showToast(msg, type='success') {
  const t = document.createElement('div');
  t.className = 'toast ' + type;
  t.textContent = msg;
  document.getElementById('toastContainer').appendChild(t);
  setTimeout(() => t.remove(), 3000);
}

// ==================== CONFETTI ====================
function launchConfetti() {
  const colors = ['#6c5ce7','#fd79a8','#00cec9','#ffeaa7','#e17055','#a29bfe'];
  for(let i = 0; i < 50; i++) {
    const c = document.createElement('div');
    c.className = 'confetti-piece';
    c.style.left = Math.random()*100 + 'vw';
    c.style.top = '-10px';
    c.style.width = Math.random()*8+4 + 'px';
    c.style.height = Math.random()*8+4 + 'px';
    c.style.background = colors[Math.floor(Math.random()*colors.length)];
    c.style.animationDuration = Math.random()*2+2 + 's';
    c.style.animationDelay = Math.random()*0.5 + 's';
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 5000);
  }
}

// ==================== ANIMATED BACKGROUND ====================
function createBg() {
  const bg = document.getElementById('bgAnimation');
  const colors = ['#6c5ce7','#fd79a8','#00cec9','#ffeaa7'];
  for(let i = 0; i < 15; i++) {
    const b = document.createElement('div');
    b.className = 'bubble';
    const size = Math.random()*300+100;
    b.style.width = size + 'px';
    b.style.height = size + 'px';
    b.style.background = colors[Math.floor(Math.random()*colors.length)];
    b.style.left = Math.random()*100 + '%';
    b.style.top = Math.random()*100 + '%';
    b.style.animationDelay = Math.random()*10 + 's';
    b.style.animationDuration = Math.random()*20+15 + 's';
    bg.appendChild(b);
  }
}

// ==================== STUDENTS ====================
const avatarColors = [
  'linear-gradient(135deg,#6c5ce7,#a29bfe)','linear-gradient(135deg,#fd79a8,#e84393)',
  'linear-gradient(135deg,#00cec9,#81ecec)','linear-gradient(135deg,#ffeaa7,#fdcb6e)',
  'linear-gradient(135deg,#e17055,#d63031)','linear-gradient(135deg,#00b894,#55efc4)',
  'linear-gradient(135deg,#0984e3,#74b9ff)','linear-gradient(135deg,#e056fd,#be2edd)'
];

let tempStudentPhoto = null;

function previewStudentPhoto(event) {
  const file = event.target.files[0];
  if (!file) return;
  if (!file.type.startsWith('image/')) { showToast('Only images allowed!','error'); return; }
  if (file.size > 2 * 1024 * 1024) { showToast('File too large! Max 2MB.','error'); return; }

  const reader = new FileReader();
  reader.onload = function(e) {
    tempStudentPhoto = e.target.result;
    document.getElementById('previewImg').src = tempStudentPhoto;
    document.getElementById('photoPreview').style.display = 'block';
  };
  reader.readAsDataURL(file);
}

function addStudent() {
  const name = document.getElementById('studentName').value.trim();
  const role = document.getElementById('studentRole').value;
  const desc = document.getElementById('studentDesc').value.trim();

  if(!name) { showToast('Enter a name!','error'); return; }

  const students = DB.get('students');
  students.push({
    id: Date.now(),
    name,
    role,
    desc: desc || 'No description yet',
    photo: tempStudentPhoto,
    color: avatarColors[Math.floor(Math.random()*avatarColors.length)]
  });
  DB.set('students', students);

  // Reset form
  document.getElementById('studentName').value = '';
  document.getElementById('studentDesc').value = '';
  document.getElementById('studentPhoto').value = '';
  document.getElementById('photoPreview').style.display = 'none';
  tempStudentPhoto = null;

  renderStudents();
  updateStats();
  showToast(name + ' joined the squad!');
  launchConfetti();
}

function removeStudent(id) {
  let students = DB.get('students');
  students = students.filter(s => s.id !== id);
  DB.set('students', students);
  renderStudents();
  updateStats();
  showToast('Student removed','info');
}

function renderStudents() {
  const students = DB.get('students');
  const grid = document.getElementById('studentsGrid');
  if(students.length === 0) {
    grid.innerHTML = '<div class="empty-state"><span class="empty-icon">&#128101;</span><p>No students yet. Add your classmates!</p></div>';
    return;
  }
  grid.innerHTML = students.map(s => `
    <div class="student-card">
      <button class="remove-btn" onclick="removeStudent(${s.id})">&times;</button>
      <div class="student-avatar" style="background:${s.color}">
        ${s.photo ? `<img src="${s.photo}" alt="${escHtml(s.name)}">` : s.name.charAt(0).toUpperCase()}
      </div>
      <h3>${escHtml(s.name)}</h3>
      <div class="role">${escHtml(s.role)}</div>
      <div class="desc">"${escHtml(s.desc || 'No description yet')}"</div>
    </div>
  `).join('');
}

// ==================== COURSES ====================
const courseEmojis = ['&#128218;','&#128187;','&#128200;','&#9883;','&#127891;','&#128300;','&#127912;','&#128202;','&#128161;','&#128640;'];

function addCourse() {
  const name = document.getElementById('courseName').value.trim();
  const prof = document.getElementById('courseProf').value.trim();
  if(!name) { showToast('Enter course name!','error'); return; }
  const courses = DB.get('courses');
  courses.push({ id: Date.now(), name, prof, emoji: courseEmojis[Math.floor(Math.random()*courseEmojis.length)] });
  DB.set('courses', courses);
  document.getElementById('courseName').value = '';
  document.getElementById('courseProf').value = '';
  renderCourses();
  showToast('Course added!');
}

function removeCourse(id) {
  let courses = DB.get('courses');
  courses = courses.filter(c => c.id !== id);
  DB.set('courses', courses);
  renderCourses();
}

function renderCourses() {
  const courses = DB.get('courses');
  const grid = document.getElementById('coursesGrid');
  if(courses.length === 0) {
    grid.innerHTML = '<div class="empty-state"><span class="empty-icon">&#128218;</span><p>No courses yet. Add your subjects!</p></div>';
    return;
  }
  grid.innerHTML = courses.map(c => `
    <div class="course-card" ondblclick="removeCourse(${c.id})">
      <span class="emoji">${c.emoji}</span>
      <h3>${escHtml(c.name)}</h3>
      <p>Prof. ${escHtml(c.prof || 'TBA')}</p>
      <p style="font-size:0.7rem;color:#555;margin-top:8px;">Double-click to remove</p>
    </div>
  `).join('');
}

// ==================== POLLS ====================
const pollCategories = [
  { id: 'tharkuri', emoji: '&#128526;', title: 'Top Tharkuri', desc: 'The ultimate flirt of the class' },
  { id: 'beautiful', emoji: '&#128149;', title: 'Most Beautiful', desc: 'The prettiest face in class' },
  { id: 'handsome', emoji: '&#128526;', title: 'Most Handsome', desc: 'The most handsome in the class' },
  { id: 'clown', emoji: '&#129313;', title: 'Class Clown', desc: 'Makes everyone laugh nonstop' },
  { id: 'sleeper', emoji: '&#128564;', title: 'Most Likely to Sleep', desc: 'Pillow is their best friend' },
  { id: 'backbencher', emoji: '&#128378;', title: 'Backbencher King/Queen', desc: 'Owns the last row' },
  { id: 'crush', emoji: '&#128536;', title: 'Class Crush', desc: 'Everyone\'s secret crush' },
  { id: 'smartest', emoji: '&#129504;', title: 'Smartest in Class', desc: 'The human Google' },
  { id: 'bunker', emoji: '&#128694;', title: 'Most Likely to Bunk', desc: 'Attendance? Never heard of it' },
  { id: 'dramatic', emoji: '&#127917;', title: 'Most Dramatic', desc: 'Should be in Bollywood' },
  { id: 'foodie', emoji: '&#127829;', title: 'Biggest Foodie', desc: 'Always eating in class' },
  { id: 'latecomer', emoji: '&#9200;', title: 'Always Late', desc: 'Has never seen the first lecture' },
];

function renderPolls() {
  const students = DB.get('students');
  const grid = document.getElementById('pollsGrid');

  if(students.length === 0) {
    grid.innerHTML = '<div class="empty-state" style="grid-column:1/-1;"><span class="empty-icon">&#128203;</span><p>Add students on the Home page first to start voting!</p></div>';
    document.getElementById('leaderboard').style.display = 'none';
    return;
  }

  grid.innerHTML = pollCategories.map(cat => {
    const votes = DB.get('poll_'+cat.id, {});
    const totalVotes = Object.values(votes).reduce((a,b) => a+b, 0);

    return `
      <div class="poll-card">
        <span class="poll-emoji">${cat.emoji}</span>
        <h3>${cat.title}</h3>
        <div class="poll-desc">${cat.desc}</div>
        <div class="poll-options">
          ${students.map(s => {
            const v = votes[s.id] || 0;
            const pct = totalVotes > 0 ? (v/totalVotes*100) : 0;
            const userVoted = DB.get('voted_'+cat.id, null);
            return `
              <div class="poll-option ${userVoted==s.id?'voted':''}" onclick="castVote('${cat.id}',${s.id})">
                <div class="fill-bar" style="width:${pct}%"></div>
                <span class="name">${escHtml(s.name)}</span>
                <span class="votes">${v} vote${v!==1?'s':''}</span>
              </div>
            `;
          }).join('')}
        </div>
        <div class="poll-total">${totalVotes} total votes</div>
      </div>
    `;
  }).join('');

  renderLeaderboard();
}

function castVote(catId, studentId) {
  const votes = DB.get('poll_'+catId, {});
  const prevVote = DB.get('voted_'+catId, null);

  // Toggle: if same vote, remove it
  if(prevVote === studentId) {
    votes[studentId] = Math.max(0, (votes[studentId]||0) - 1);
    DB.set('poll_'+catId, votes);
    DB.set('voted_'+catId, null);
  } else {
    // Remove previous vote
    if(prevVote !== null && votes[prevVote]) {
      votes[prevVote] = Math.max(0, votes[prevVote] - 1);
    }
    votes[studentId] = (votes[studentId]||0) + 1;
    DB.set('poll_'+catId, votes);
    DB.set('voted_'+catId, studentId);
    showToast('Vote cast!');
  }

  updateStats();
  renderPolls();
}

function renderLeaderboard() {
  const students = DB.get('students');
  if(students.length === 0) return;

  // Aggregate wins across all polls
  const wins = {};
  pollCategories.forEach(cat => {
    const votes = DB.get('poll_'+cat.id, {});
    let maxV = 0, winner = null;
    Object.entries(votes).forEach(([sid, v]) => {
      if(v > maxV) { maxV = v; winner = sid; }
    });
    if(winner && maxV > 0) {
      wins[winner] = (wins[winner]||0) + 1;
    }
  });

  const sorted = Object.entries(wins)
    .map(([sid, w]) => {
      const s = students.find(st => st.id == sid);
      return s ? { name: s.name, wins: w } : null;
    })
    .filter(Boolean)
    .sort((a,b) => b.wins - a.wins)
    .slice(0, 5);

  const lb = document.getElementById('leaderboard');
  const list = document.getElementById('leaderboardList');

  if(sorted.length === 0) { lb.style.display = 'none'; return; }
  lb.style.display = 'block';

  list.innerHTML = sorted.map((item, i) => `
    <div class="leaderboard-item">
      <div class="rank">${i < 3 ? ['&#129351;','&#129352;','&#129353;'][i] : i+1}</div>
      <div class="l-name">${escHtml(item.name)}</div>
      <div class="l-votes">${item.wins} title${item.wins!==1?'s':''}</div>
    </div>
  `).join('');
}

// ==================== MEMES ====================
const memeUploadArea = document.getElementById('memeUploadArea');
memeUploadArea.addEventListener('dragover', e => { e.preventDefault(); memeUploadArea.classList.add('dragover'); });
memeUploadArea.addEventListener('dragleave', () => memeUploadArea.classList.remove('dragover'));
memeUploadArea.addEventListener('drop', e => {
  e.preventDefault();
  memeUploadArea.classList.remove('dragover');
  if(e.dataTransfer.files.length) processMemeFile(e.dataTransfer.files[0]);
});

function handleMemeUpload(e) {
  if(e.target.files.length) processMemeFile(e.target.files[0]);
}

function processMemeFile(file) {
  if(!file.type.startsWith('image/')) { showToast('Only images allowed!','error'); return; }
  if(file.size > 5 * 1024 * 1024) { showToast('File too large! Max 5MB.','error'); return; }
  const reader = new FileReader();
  reader.onload = function(e) {
    const caption = document.getElementById('memeCaption').value.trim() || 'No caption';
    const author = document.getElementById('memeAuthor').value.trim() || 'Anonymous';
    const memes = DB.get('memes');
    memes.unshift({
      id: Date.now(),
      data: e.target.result,
      caption,
      author,
      reactions: { fire: 0, laugh: 0, skull: 0, heart: 0 },
      timestamp: new Date().toISOString()
    });
    DB.set('memes', memes);
    document.getElementById('memeCaption').value = '';
    document.getElementById('memeAuthor').value = '';
    document.getElementById('memeFileInput').value = '';
    renderMemes();
    updateStats();
    showToast('Meme uploaded!');
    launchConfetti();
  };
  reader.readAsDataURL(file);
}

function reactToMeme(memeId, reaction) {
  const memes = DB.get('memes');
  const m = memes.find(x => x.id === memeId);
  if(!m) return;
  const userReacts = DB.get('meme_reacts', {});
  const key = memeId + '_' + reaction;
  if(userReacts[key]) {
    m.reactions[reaction] = Math.max(0, m.reactions[reaction] - 1);
    delete userReacts[key];
  } else {
    m.reactions[reaction] = (m.reactions[reaction]||0) + 1;
    userReacts[key] = true;
  }
  DB.set('memes', memes);
  DB.set('meme_reacts', userReacts);
  renderMemes();
}

function deleteMeme(id) {
  let memes = DB.get('memes');
  memes = memes.filter(m => m.id !== id);
  DB.set('memes', memes);
  renderMemes();
  updateStats();
  showToast('Meme deleted','info');
}

function renderMemes() {
  const memes = DB.get('memes');
  const grid = document.getElementById('memesGrid');
  if(memes.length === 0) {
    grid.innerHTML = '<div class="empty-state" style="grid-column:1/-1;"><span class="empty-icon">&#128248;</span><p>No memes yet. Be the first to upload!</p></div>';
    return;
  }
  const userReacts = DB.get('meme_reacts', {});
  grid.innerHTML = memes.map(m => `
    <div class="meme-card">
      <button class="delete-meme" onclick="deleteMeme(${m.id})">&times;</button>
      <img src="${m.data}" alt="${escHtml(m.caption)}" loading="lazy">
      <div class="meme-info">
        <div class="caption">${escHtml(m.caption)}</div>
        <div class="author">by ${escHtml(m.author)} &middot; ${timeAgo(m.timestamp)}</div>
        <div class="meme-reactions">
          <button class="meme-react-btn ${userReacts[m.id+'_fire']?'active':''}" onclick="reactToMeme(${m.id},'fire')">&#128293; ${m.reactions.fire||0}</button>
          <button class="meme-react-btn ${userReacts[m.id+'_laugh']?'active':''}" onclick="reactToMeme(${m.id},'laugh')">&#128514; ${m.reactions.laugh||0}</button>
          <button class="meme-react-btn ${userReacts[m.id+'_skull']?'active':''}" onclick="reactToMeme(${m.id},'skull')">&#128128; ${m.reactions.skull||0}</button>
          <button class="meme-react-btn ${userReacts[m.id+'_heart']?'active':''}" onclick="reactToMeme(${m.id},'heart')">&#128151; ${m.reactions.heart||0}</button>
        </div>
      </div>
    </div>
  `).join('');
}

// ==================== CONFESSIONS ====================
function addConfession() {
  const text = document.getElementById('confessionText').value.trim();
  if(!text) { showToast('Write something first!','error'); return; }
  if(text.length < 5) { showToast('Too short!','error'); return; }
  const confessions = DB.get('confessions');
  confessions.unshift({
    id: Date.now(),
    text,
    reactions: { heart: 0, haha: 0, shock: 0, relate: 0 },
    timestamp: new Date().toISOString()
  });
  DB.set('confessions', confessions);
  document.getElementById('confessionText').value = '';
  renderConfessions();
  updateStats();
  showToast('Confession posted anonymously!');
}

function reactToConfession(id, reaction) {
  const confessions = DB.get('confessions');
  const c = confessions.find(x => x.id === id);
  if(!c) return;
  c.reactions[reaction] = (c.reactions[reaction]||0) + 1;
  DB.set('confessions', confessions);
  renderConfessions();
}

function deleteConfession(id) {
  let confessions = DB.get('confessions');
  confessions = confessions.filter(c => c.id !== id);
  DB.set('confessions', confessions);
  renderConfessions();
  updateStats();
}

function renderConfessions() {
  const confessions = DB.get('confessions');
  const list = document.getElementById('confessionsList');
  if(confessions.length === 0) {
    list.innerHTML = '<div class="empty-state"><span class="empty-icon">&#128172;</span><p>No confessions yet. Be brave and confess!</p></div>';
    return;
  }
  list.innerHTML = confessions.map(c => `
    <div class="confession-card">
      <button class="remove-btn" style="opacity:0.5;position:absolute;top:10px;right:10px;" onclick="deleteConfession(${c.id})">&times;</button>
      <div class="confession-text">"${escHtml(c.text)}"</div>
      <div class="confession-meta">
        <span class="time">&#128123; Anonymous &middot; ${timeAgo(c.timestamp)}</span>
        <div class="confession-reacts">
          <button class="confession-react-btn" onclick="reactToConfession(${c.id},'heart')">&#10084;&#65039; ${c.reactions.heart||0}</button>
          <button class="confession-react-btn" onclick="reactToConfession(${c.id},'haha')">&#128514; ${c.reactions.haha||0}</button>
          <button class="confession-react-btn" onclick="reactToConfession(${c.id},'shock')">&#128562; ${c.reactions.shock||0}</button>
          <button class="confession-react-btn" onclick="reactToConfession(${c.id},'relate')">&#129309; ${c.reactions.relate||0}</button>
        </div>
      </div>
    </div>
  `).join('');
}

// ==================== TRUTH OR DARE SPINNER ====================
const truths = [
  "What's the most embarrassing thing you've done in class?",
  "Who do you secretly have a crush on in this class?",
  "What's the worst grade you've ever gotten?",
  "Have you ever cheated on an exam?",
  "Who do you think is the most annoying in class?",
  "What's the weirdest thing in your search history?",
  "If you could date anyone in class, who would it be?",
  "What's the biggest lie you've told a teacher?",
  "Have you ever pretended to be sick to skip class?",
  "Who do you gossip about the most?",
  "What's the most childish thing you still do?",
  "What's your most embarrassing nickname?",
  "Have you ever fallen asleep in class? Who was the teacher?",
  "What's the last text you sent?",
  "If you had to be stuck in a lift with one classmate, who?",
  "What's the most trouble you've been in at college?",
  "Have you ever copied someone's assignment? Whose?",
  "What's your guilty pleasure song?",
  "If you could swap lives with someone in class for a day, who?",
  "What's the most embarrassing photo on your phone?"
];

const dares = [
  "Do 10 pushups right now!",
  "Let someone post a story on your Instagram!",
  "Talk in a funny accent for the next 5 minutes!",
  "Send 'I love you' to the 5th contact in your phone!",
  "Do your best impression of the professor!",
  "Let the class go through your gallery for 30 seconds!",
  "Sing a song loudly right now!",
  "Call your crush and say 'I miss you'!",
  "Do a catwalk across the classroom!",
  "Let someone type a message on your phone and send it!",
  "Speak only in a movie dialogue for the next 3 minutes!",
  "Dance for 30 seconds without music!",
  "Post an ugly selfie on your story!",
  "Do a TikTok dance right now!",
  "Give a compliment to every person sitting near you!",
  "Act like a monkey for 1 minute!",
  "Let the group choose your profile picture for 24 hours!",
  "Eat something without using your hands!",
  "Text your parents 'I got detention'!",
  "Do your best Bollywood hero entry!"
];

function generateTruth() {
  const el = document.getElementById('todResult');
  el.style.color = 'var(--primary-light)';
  el.innerHTML = '&#129300; ' + truths[Math.floor(Math.random()*truths.length)];
  spawnParticles(el);
}

function generateDare() {
  const el = document.getElementById('todResult');
  el.style.color = '#e74c3c';
  el.innerHTML = '&#128293; ' + dares[Math.floor(Math.random()*dares.length)];
  spawnParticles(el);
}

function spawnParticles(el) {
  const rect = el.getBoundingClientRect();
  const colors = ['#6c5ce7','#fd79a8','#00cec9','#ffeaa7'];
  for(let i = 0; i < 10; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = rect.left + Math.random()*rect.width + 'px';
    p.style.top = rect.top + Math.random()*rect.height + 'px';
    p.style.width = p.style.height = Math.random()*8+4 + 'px';
    p.style.background = colors[Math.floor(Math.random()*colors.length)];
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 1500);
  }
}

// Student Wheel
let wheelRotation = 0;
function drawStudentWheel() {
  const students = DB.get('students');
  const canvas = document.getElementById('studentWheel');
  const ctx = canvas.getContext('2d');
  const cx = 130, cy = 130, r = 125;

  ctx.clearRect(0, 0, 260, 260);

  if(students.length === 0) {
    ctx.fillStyle = '#333';
    ctx.beginPath();
    ctx.arc(cx, cy, r, 0, Math.PI*2);
    ctx.fill();
    ctx.fillStyle = '#888';
    ctx.font = '14px Poppins';
    ctx.textAlign = 'center';
    ctx.fillText('Add students first!', cx, cy);
    return;
  }

  const colors = ['#6c5ce7','#fd79a8','#00cec9','#ffeaa7','#e17055','#00b894','#0984e3','#e056fd','#fdcb6e','#636e72','#d63031','#74b9ff'];
  const slice = (Math.PI*2) / students.length;

  students.forEach((s, i) => {
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, r, i*slice, (i+1)*slice);
    ctx.closePath();
    ctx.fillStyle = colors[i % colors.length];
    ctx.fill();
    ctx.strokeStyle = '#0f0f1a';
    ctx.lineWidth = 2;
    ctx.stroke();

    // Text
    ctx.save();
    ctx.translate(cx, cy);
    ctx.rotate(i*slice + slice/2);
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 11px Poppins';
    ctx.textAlign = 'right';
    const displayName = s.name.length > 10 ? s.name.substring(0,10)+'..' : s.name;
    ctx.fillText(displayName, r-10, 4);
    ctx.restore();
  });
}

function spinStudentWheel() {
  const students = DB.get('students');
  if(students.length === 0) { showToast('Add students first!','error'); return; }

  const canvas = document.getElementById('studentWheel');
  const spins = 5 + Math.random()*5;
  const extra = Math.random() * 360;
  wheelRotation += spins * 360 + extra;
  canvas.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
  canvas.style.transform = `rotate(${wheelRotation}deg)`;

  setTimeout(() => {
    const normalized = wheelRotation % 360;
    const sliceDeg = 360 / students.length;
    // Pointer is at top (270 degrees from 0/right). Calculate which slice.
    const pointerAngle = (360 - normalized + 270) % 360;
    const idx = Math.floor(pointerAngle / sliceDeg) % students.length;
    const picked = students[idx];
    document.getElementById('studentSpinResult').innerHTML = `&#127919; ${escHtml(picked.name)} has been chosen!`;
    launchConfetti();
  }, 4200);
}

// ==================== EXCUSE GENERATOR ====================
const excuses = [
  "My alarm clock is on a different timezone and I haven't figured out which one yet.",
  "I was up all night researching if birds are real. The jury is still out.",
  "My WiFi was down and I needed it to remember where the college is.",
  "I got stuck in traffic... on a footpath.",
  "My dog ate my motivation to attend class.",
  "I was busy calculating the probability of actually needing today's lecture. Result: 0.01%.",
  "I accidentally joined a Zoom meeting instead and couldn't figure out how to leave.",
  "I was having an existential crisis about whether attendance really matters in the grand scheme of the universe.",
  "Google Maps took me to the wrong college. I attended someone else's lecture.",
  "I dreamed I was in class and it felt so real, I thought I already attended.",
  "My horoscope said it's not a good day to learn new things.",
  "I was saving a cat from a tree. The cat didn't cooperate.",
  "My auto-rickshaw driver took the scenic route... through another city.",
  "I'm still buffering. Please wait.",
  "I thought today was Sunday. For the 5th time this semester.",
  "I was conducting very important research on Netflix.",
  "My chair at home was too comfortable. I'm still recovering from the comfort.",
  "I got lost in the college. It's only my 3rd year, give me a break.",
  "I was waiting for the right moment to make a dramatic entrance. The moment never came.",
  "I read that standing in the sun gives you Vitamin D, so I was self-medicating.",
  "The class WhatsApp group said class was cancelled. I believed them. Again.",
  "I was on an important call... with my bed. It wouldn't let me go.",
  "My brain reached its monthly data limit.",
  "I was protesting the concept of morning classes. Peacefully. From my bed.",
  "I had a sudden allergy attack. I'm allergic to 8 AM lectures."
];

let currentExcuse = '';
function generateExcuse() {
  currentExcuse = excuses[Math.floor(Math.random()*excuses.length)];
  const el = document.getElementById('excuseDisplay');
  el.style.animation = 'none';
  el.offsetHeight; // trigger reflow
  el.style.animation = 'fadeIn 0.5s ease';
  el.textContent = currentExcuse;
}

function copyExcuse() {
  if(!currentExcuse) { showToast('Generate an excuse first!','error'); return; }
  navigator.clipboard.writeText(currentExcuse).then(() => {
    showToast('Excuse copied! Good luck!');
  }).catch(() => {
    showToast('Couldn\'t copy','error');
  });
}

// ==================== UTILITIES ====================
function escHtml(str) {
  const div = document.createElement('div');
  div.textContent = str;
  return div.innerHTML;
}

function timeAgo(iso) {
  const diff = Date.now() - new Date(iso).getTime();
  const mins = Math.floor(diff/60000);
  if(mins < 1) return 'just now';
  if(mins < 60) return mins + 'm ago';
  const hrs = Math.floor(mins/60);
  if(hrs < 24) return hrs + 'h ago';
  const days = Math.floor(hrs/24);
  return days + 'd ago';
}

function updateStats() {
  document.getElementById('statStudents').textContent = DB.get('students').length;
  document.getElementById('statMemes').textContent = DB.get('memes').length;
  document.getElementById('statConfessions').textContent = DB.get('confessions').length;

  let totalVotes = 0;
  pollCategories.forEach(cat => {
    const votes = DB.get('poll_'+cat.id, {});
    totalVotes += Object.values(votes).reduce((a,b) => a+b, 0);
  });
  document.getElementById('statVotes').textContent = totalVotes;
}

// ==================== INIT ====================
function init() {
  createBg();
  renderStudents();
  renderCourses();
  renderMemes();
  renderConfessions();
  updateStats();

  // Initialize interaction tracking
  InteractionTracker.init();
}

init();

// Console helper for analysis
console.log('%c Interaction Tracker Loaded! ', 'background: #6c5ce7; color: white; font-size: 14px; padding: 5px 10px; border-radius: 5px;');
console.log('%c Available Commands: ', 'color: #00cec9; font-weight: bold;');
console.log('  InteractionTracker.getSummary() - Get usage statistics');
console.log('  InteractionTracker.getAllInteractions() - Get all recorded interactions');
console.log('  InteractionTracker.getCurrentSession() - Get current session data');
console.log('  InteractionTracker.export() - Export all data as JSON');
console.log('  InteractionTracker.clear() - Clear all interaction data');
</script>
</body>
</html>
